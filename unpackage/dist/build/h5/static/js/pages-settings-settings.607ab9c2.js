(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-settings-settings"],{"21db":function(t,e,n){"use strict";n.r(e);var i=n("92d9"),a=n("c707");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o,c=n("f0c5"),u=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"242341bb",null,!1,i["a"],o);e["default"]=u.exports},"37cc":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("7b36"),a=i.constant,s=i.factory,o={data:function(){return{headerImg:null,imageList:[],logoutUser:!1,login:!0}},onLoad:function(t){i.onLoad(t);var e=uni.getStorageSync(a.mapping.OWNER_INFO);null!=e&&""!=e?this.loadOwnerHeaderImg():this.login=!1},methods:{settingHeadImg:function(){var t=this;wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){wx.showToast({title:"正在上传",icon:"loading",mask:!0,duration:1e3});var n=e.tempFilePaths;console.log("头像地址",n),s.base64.urlTobase64(n[0]).then((function(e){t.headerImg=e,t._uploadOwnerHeaderImg(),wx.hideLoading()}))}})},loadOwnerHeaderImg:function(){var t=this;i.getOwner((function(e){var n=a.url.getOwnerPhotoPath+"?objId="+e.memberId+"&communityId="+e.communityId+"&fileTypeCd=10000";t.headerImg=n}))},_uploadOwnerHeaderImg:function(){var t=this;i.getOwner((function(e){var n=e.memberId,s=e.communityId,o={memberId:n,communityId:s,photo:t.headerImg};i.request({url:a.url.uploadOwnerPhoto,header:i.getHeaders(),method:"POST",data:o,success:function(t){console.log(t),200==t.statusCode||wx.showToast({title:"头像上传失败",icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})}))},_logout:function(){this.logoutUser=!0},_cancleLogout:function(){this.logoutUser=!1},_toPage:function(t){uni.navigateTo({url:t})},_doLogoutUser:function(){var t={token:wx.getStorageSync("token")};i.request({url:a.url.userLogout,header:i.getHeaders(),method:"POST",data:t,success:function(t){if(200==t.statusCode){var e=uni.getStorageSync(a.mapping.W_APP_ID);uni.clearStorageSync(),null!=e&&void 0!=e&&""!=e&&uni.setStorageSync(a.mapping.W_APP_ID,_option.wAppId),uni.navigateTo({url:"/pages/login/login"})}else uni.showToast({icon:"none",title:t.data})},fail:function(t){uni.showToast({title:"调用接口失败"}),console.log(t)}})}}};e.default=o},"92d9":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",[n("v-uni-view",{staticClass:"cu-list menu"},[n("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.settingHeadImg()}}},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-emojiflashfill text-pink"}),n("v-uni-text",{staticClass:"text-grey"},[t._v("我的头像")])],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-view",{staticClass:"cu-avatar round ",style:{backgroundImage:"url("+t.headerImg+")"}})],1)],1),n("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._toPage("/pages/viewAdmin/viewAdmin")}}},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-questionfill text-cyan"}),n("v-uni-text",{staticClass:"text-grey"},[t._v("技术支持")])],1),n("v-uni-view",{staticClass:"action"})],1),n("v-uni-view",{staticClass:"cu-item"},[n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"cuIcon-warn text-green"}),n("v-uni-text",{staticClass:"text-grey"},[t._v("版本号")])],1),n("v-uni-view",{staticClass:"action"},[n("v-uni-text",{staticClass:"text-grey text-sm"},[t._v("V0.1.0")])],1)],1)],1),t.login?n("v-uni-view",{staticClass:"margin-top"},[n("v-uni-view",{staticClass:"cu-list menu"},[n("v-uni-view",{staticClass:"cu-item ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._logout()}}},[n("v-uni-view",{staticClass:"content text-center"},[n("v-uni-text",{staticClass:"text-red"},[t._v("退 出")])],1)],1)],1)],1):t._e()],1),n("v-uni-view",{staticClass:"cu-modal",class:1==t.logoutUser?"show":""},[n("v-uni-view",{staticClass:"cu-dialog"},[n("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[n("v-uni-view",{staticClass:"content"},[t._v("退出系统")]),n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleLogout()}}},[n("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),n("v-uni-view",{staticClass:"padding-xl"},[t._v("您确认退出系统吗？")]),n("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[n("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleLogout()}}},[t._v("取消")]),n("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._doLogoutUser()}}},[t._v("确定")])],1)],1)],1)],1)},s=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))},c707:function(t,e,n){"use strict";n.r(e);var i=n("37cc"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a}}]);