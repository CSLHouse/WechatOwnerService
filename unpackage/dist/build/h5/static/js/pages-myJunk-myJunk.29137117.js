(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myJunk-myJunk"],{4631:function(t,e,i){"use strict";i.r(e);var n=i("f78e"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},ab43:function(t,e,i){"use strict";var n,s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":!0}},[i("v-uni-view",{staticClass:"flex text-center"},[i("v-uni-view",{staticClass:"cu-item flex-sub",class:0==t.active?"text-green cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._tabSelect(0)}}},[t._v("我的旧货")]),i("v-uni-view",{staticClass:"cu-item flex-sub",class:1==t.active?"text-green cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._tabSelect(1)}}},[t._v("我的需求")])],1)],1),0==t.active?i("v-uni-view",t._l(t.junks,(function(e,n){return i("v-uni-view",{key:n,staticClass:"bg-white margin-bottom margin-top padding-top padding-bottom-sm"},[i("v-uni-view",{staticClass:"flex justify-between margin-left margin-right "},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"cu-avatar round",staticStyle:{"background-image":"url(https://ossweb-img.qq.com/images/lol/web201310/skin/big25002.jpg)"}}),i("v-uni-text",{staticClass:"margin-left-xs text-black"},[t._v(t._s(e.publishUserName))])],1),i("v-uni-view",{staticClass:"text-grey align-center"},[i("v-uni-text",[t._v(t._s(e.createTime))])],1)],1),i("v-uni-view",{staticClass:"margin-top-sm margin-left margin-right"},[i("v-uni-text",{staticClass:"text-df"},[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"margin-top-sm margin-left margin-right grid text-center col-3 grid-square"},t._l(e.photos,(function(e,n){return i("v-uni-view",{key:n},[i("v-uni-image",{attrs:{mode:"scaleToFill",src:e.url},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.preview(e.url)}}})],1)})),1),i("v-uni-view",{staticClass:"solid-top padding-top-sm flex justify-around align-center"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:"lg text-yellow cuIcon-moneybag"}),i("v-uni-text",{staticClass:"margin-left-xs text-yellow"},[t._v("50.00")])],1),i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteJunk(e.junkRequirementId)}}},[i("v-uni-text",{staticClass:"lg text-red cuIcon-deletefill"}),i("v-uni-text",{staticClass:"margin-left-xs text-red"},[t._v("删除")])],1),"13001"==e.state?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.finishJunk(e.junkRequirementId)}}},[i("v-uni-text",{staticClass:"lg text-green cuIcon-selection"}),i("v-uni-text",{staticClass:"margin-left-xs text-green"},[t._v("完成")])],1):i("v-uni-view",[i("v-uni-text",{staticClass:"lg text-green cuIcon-selection"}),i("v-uni-text",{staticClass:"margin-left-xs text-green"},[t._v(t._s(e.stateName))])],1)],1)],1)})),1):t._e(),1==t.active?i("v-uni-view",t._l(t.requirements,(function(e,n){return i("v-uni-view",{key:n,staticClass:"bg-white margin-bottom margin-top padding-top padding-bottom-sm"},[i("v-uni-view",{staticClass:"flex justify-between margin-left margin-right "},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"cu-avatar round",staticStyle:{"background-image":"url(https://ossweb-img.qq.com/images/lol/web201310/skin/big25002.jpg)"}}),i("v-uni-text",{staticClass:"margin-left-xs text-black"},[t._v(t._s(e.publishUserName))])],1),i("v-uni-view",{staticClass:"text-grey align-center"},[i("v-uni-text",[t._v(t._s(e.createTime))])],1)],1),i("v-uni-view",{staticClass:"margin-top-sm margin-left margin-right margin-bottom-sm"},[i("v-uni-text",{staticClass:"text-df"},[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"solid-top padding-top-sm flex justify-around align-center"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:"lg text-yellow cuIcon-moneybag"}),i("v-uni-text",{staticClass:"margin-left-xs text-yellow"},[t._v("50.00")])],1),i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteJunk(e.junkRequirementId)}}},[i("v-uni-text",{staticClass:"lg text-red cuIcon-deletefill"}),i("v-uni-text",{staticClass:"margin-left-xs text-red"},[t._v("删除")])],1),"13001"==e.state?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.finishJunk(e.junkRequirementId)}}},[i("v-uni-text",{staticClass:"lg text-green cuIcon-selection"}),i("v-uni-text",{staticClass:"margin-left-xs text-green"},[t._v("完成")])],1):i("v-uni-view",[i("v-uni-text",{staticClass:"lg text-green cuIcon-selection"}),i("v-uni-text",{staticClass:"margin-left-xs text-green"},[t._v(t._s(e.stateName))])],1)],1)],1)})),1):t._e(),i("v-uni-view",{staticClass:"cu-modal",class:t.viewImage?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"bg-img",style:"background-image: url("+t.viewImageSrc+");height:800rpx;"},[i("v-uni-view",{staticClass:"cu-bar justify-end text-white"},[i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeViewImage()}}},[i("v-uni-text",{staticClass:"cuIcon-close "})],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"cu-modal",class:1==t.deleteJunkModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("温馨提示")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleDeleteJunk()}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl"},[t._v("您确认删除吗？")]),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleDeleteJunk()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._doDeleteJunk()}}},[t._v("确定")])],1)],1)],1),i("v-uni-view",{staticClass:"cu-modal",class:1==t.finishJunkModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("温馨提示")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleFinishJunk()}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl"},[t._v("您确认标记为已完成吗？")]),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleFinishJunk()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._doFinishJunk()}}},[t._v("确定")])],1)],1)],1)],1)},a=[];i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}))},bce2:function(t,e,i){"use strict";i.r(e);var n=i("ab43"),s=i("4631");for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);var u,c=i("f0c5"),l=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,"0c074ced",null,!1,n["a"],u);e["default"]=l.exports},f78e:function(t,e,i){"use strict";i("4160"),i("ac1f"),i("5319"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("a293"),s=n.constant,a=(n.factory,{data:function(){return{active:0,viewImage:!1,deleteJunkModal:!1,finishJunkModal:!1,currentJunkRequirementId:"",viewImageSrc:"",communityId:"",userId:"",junks:[],requirements:[]}},onLoad:function(t){var e=this;n.onLoad(t),n.getOwner((function(t){console.log("_ownerInfo",t),e.communityId=t.communityId,e.userId=t.userId,e._loadMarket(e.active)}))},methods:{_tabSelect:function(t){this.active=t,this._loadMarket(t)},_loadMarket:function(t){var e=this,i="";i=0==t?"222222":"333333",this.loading=!0;var a={communityId:e.communityId,publishUserId:e.userId,typeCd:i,page:1,row:15};n.request({url:s.url.listJunkRequirements,header:n.getHeaders(),method:"GET",data:a,success:function(t){if(console.log("res",t),200==t.statusCode){var n=t.data.junkRequirements;n.forEach((function(t){var e=t.createTime.replace(" ",":").replace(/\:/g,"-").split("-"),n=e[1].split("")[1]+"-"+e[2]+"\t"+e[3]+":"+e[4];t.createTime=n,"222222"==i&&t.photos.forEach((function(t){t.url=s.url.baseUrl+t.url}))})),"222222"==i?e.junks=n:e.requirements=n}},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})},preview:function(t){this.viewImage=!0,this.viewImageSrc=t},closeViewImage:function(){this.viewImage=!1},_cancleDeleteJunk:function(){this.deleteJunkModal=!1},deleteJunk:function(t){this.currentJunkRequirementId=t,this.deleteJunkModal=!0},_cancleFinishJunk:function(){this.finishJunkModal=!1},finishJunk:function(t){this.currentJunkRequirementId=t,this.finishJunkModal=!0},_doFinishJunk:function(){var t=this,e={communityId:t.communityId,junkRequirementId:this.currentJunkRequirementId,state:"15001"};n.request({url:s.url.updateJunkRequirement,header:n.getHeaders(),method:"POST",data:e,success:function(e){console.log("res",e),200==e.statusCode?(t.finishJunkModal=!1,uni.showToast({title:"操作成功",icon:"none",duration:2e3}),t._loadMarket(t.active)):uni.showToast({title:e.data,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})},_doDeleteJunk:function(){var t=this,e={communityId:t.communityId,junkRequirementId:this.currentJunkRequirementId};n.request({url:s.url.deleteJunkRequirement,header:n.getHeaders(),method:"POST",data:e,success:function(e){console.log("res",e),200==e.statusCode?(t.deleteJunkModal=!1,uni.showToast({title:"删除成功",icon:"none",duration:2e3}),t._loadMarket(t.active)):uni.showToast({title:e.data,icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})}}});e.default=a}}]);