(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myRepair-myRepair"],{"13ea":function(t,e,i){"use strict";var a={noDataPage:i("17e3").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":!0}},[i("v-uni-view",{staticClass:"flex text-center"},[i("v-uni-view",{staticClass:"cu-item flex-sub",class:0==t.active?"text-green cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect(0)}}},[t._v("待处理")]),i("v-uni-view",{staticClass:"cu-item flex-sub",class:1==t.active?"text-green cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect(1)}}},[t._v("处理中")]),i("v-uni-view",{staticClass:"cu-item flex-sub",class:2==t.active?"text-green cur":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect(2)}}},[t._v("完成")])],1)],1),0==t.active?i("v-uni-view",{staticClass:"ppfl_c"},[0==t.noData?i("v-uni-view",t._l(t.waitRepair,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[i("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[i("v-uni-view",[t._v(t._s(e.repairId))]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.tel))])],1),i("v-uni-view",{staticClass:"flex margin-top justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修类型")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairTypeName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修人")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("位置")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairObjName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("预约时间")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.appointmentTime))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("状态")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.stateName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修内容")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"solid-top flex justify-end margin-top padding-top-sm "},[i("v-uni-button",{staticClass:"cu-btn sm line-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.repairDetail(e)}}},[t._v("详情")]),i("v-uni-button",{staticClass:"cu-btn sm bg-red margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteRepair(e)}}},[t._v("删除")])],1)],1)})),1):i("v-uni-view",[i("no-data-page")],1)],1):t._e(),1==t.active?i("v-uni-view",{staticClass:"ppfl_c"},[0==t.noData?i("v-uni-view",t._l(t.doingRepair,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[i("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[i("v-uni-view",[t._v(t._s(e.repairId))]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.tel))])],1),i("v-uni-view",{staticClass:"flex margin-top justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修类型")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairTypeName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修人")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("位置")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairObjName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("预约时间")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.appointmentTime))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("状态")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.stateName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修内容")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"solid-top flex justify-end margin-top padding-top-sm "},[i("v-uni-button",{staticClass:"cu-btn sm line-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.repairDetail(e)}}},[t._v("详情")])],1)],1)})),1):i("v-uni-view",[i("no-data-page")],1)],1):t._e(),2==t.active?i("v-uni-view",{staticClass:"ppfl_c"},[0==t.noData?i("v-uni-view",t._l(t.repaired,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bg-white margin-top margin-right-xs radius margin-left-xs padding"},[i("v-uni-view",{staticClass:"flex padding-bottom-xs solid-bottom justify-between"},[i("v-uni-view",[t._v(t._s(e.repairId))]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.tel))])],1),i("v-uni-view",{staticClass:"flex margin-top justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修类型")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairTypeName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修人")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("位置")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.repairObjName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("预约时间")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.appointmentTime))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("状态")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.stateName))])],1),i("v-uni-view",{staticClass:"flex margin-top-xs justify-between"},[i("v-uni-view",{staticClass:"text-gray"},[t._v("报修内容")]),i("v-uni-view",{staticClass:"text-gray"},[t._v(t._s(e.context))])],1),i("v-uni-view",{staticClass:"solid-top flex justify-end margin-top padding-top-sm "},[i("v-uni-button",{staticClass:"cu-btn sm line-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.repairDetail(e)}}},[t._v("详情")]),"1400"==e.state?i("v-uni-button",{staticClass:"cu-btn sm bg-green  margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._toPay(e)}}},[t._v("支付")]):t._e(),"1700"==e.state?i("v-uni-button",{staticClass:"cu-btn sm bg-green margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._appraiseRepair(e)}}},[t._v("评价")]):t._e(),"1700"==e.state||"1400"==e.state?i("v-uni-button",{staticClass:"cu-btn sm  bg-red margin-left",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t._backRepair(e)}}},[t._v("退回")]):t._e()],1)],1)})),1):i("v-uni-view",[i("no-data-page")],1)],1):t._e(),i("v-uni-view",{staticClass:"cu-modal",class:1==t.deleteRepairModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("温馨提示")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleDeleteRepair()}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"padding-xl"},[t._v("您确认删除当前订单")]),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleDeleteRepair()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._doDeleteRepair()}}},[t._v("删除")])],1)],1)],1),i("v-uni-view",{staticClass:"cu-modal",class:1==t.backRepairModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v("退单原因")]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleBackRepair()}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-textarea",{attrs:{maxlength:"50",placeholder:"请输入退单原因"},model:{value:t.context,callback:function(e){t.context=e},expression:"context"}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._cancleBackRepair()}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._doBackRepair()}}},[t._v("确认")])],1)],1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},"17e3":function(t,e,i){"use strict";i.r(e);var a=i("2b9b"),n=i("72ac");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("36b8");var r,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"0f4021c1",null,!1,a["a"],r);e["default"]=u.exports},"2b9b":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:" text-center margin-top-100"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:" cuIcon-warnfill light text-orange no-data-icon"})],1),i("v-uni-view",{},[i("v-uni-text",{staticClass:"text-gray"},[t._v("当前没有数据")])],1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},"30dd":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"NoDataPage",data:function(){return{}},methods:{}};e.default=a},"36b8":function(t,e,i){"use strict";var a=i("4981"),n=i.n(a);n.a},4981:function(t,e,i){var a=i("e4bf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5c18f484",a,!0,{sourceMap:!1,shadowMode:!1})},"6b0f":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".solid-bottom[data-v-c6591662]::after{border-bottom:%?2?% solid rgba(0,0,0,.1)}",""]),t.exports=e},"72ac":function(t,e,i){"use strict";i.r(e);var a=i("30dd"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"98f2":function(t,e,i){"use strict";i.r(e);var a=i("13ea"),n=i("ca01");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("af09");var r,c=i("f0c5"),u=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"c6591662",null,!1,a["a"],r);e["default"]=u.exports},af09:function(t,e,i){"use strict";var a=i("d130"),n=i.n(a);n.a},b026:function(t,e,i){"use strict";var a=i("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("17e3")),s=i("a293"),r=(s.factory,s.constant),c={data:function(){return{active:0,userId:"",roomId:"",communityId:"",waitRepair:[],doingRepair:[],repaired:[],deleteRepairModal:!1,backRepairModal:!1,curRepair:{},noData:!1,preStaffId:"",preStaffName:"",context:""}},components:{noDataPage:n.default},onLoad:function(t){var e=this;s.onLoad(t),s.getOwner((function(t){console.log("_ownerInfo",t),e.userId=t.userId,e.communityId=t.communityId,e._loadRepair(e.active)}))},methods:{_loadRepair:function(t){var e=this,i="",a="";i=r.url.listStaffFinishRepairs,0==t?a="1000":1==t?(i=r.url.listStaffFinishRepairs,a="1100,1200,1300"):(i=r.url.listStaffFinishRepairs,a="1400,1500,1700,1800,1900,2000");var n={communityId:e.communityId,page:1,row:10,userId:e.userId,repairStates:a};s.request({url:i,header:s.getHeaders(),method:"GET",data:n,success:function(i){var a=i.data;if(0==a.code){var n=a.data;return console.log("_ownerRepairs",n),n.length<1?e.noData=!0:e.noData=!1,void(0==t?e.waitRepair=n:1==t?e.doingRepair=n:e.repaired=n)}wx.showToast({title:"查询报修单失败",icon:"none",duration:2e3})},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})},onChange:function(t){console.log(t),this._loadRepair(t.detail.index)},tabSelect:function(t){this.active=t,this._loadRepair(t)},repairDetail:function(t){s.navigateTo({url:"/pages/repairDetail/repairDetail?repairId="+t.repairId})},deleteRepair:function(t){this.curRepair=t,this.deleteRepairModal=!0},_cancleDeleteRepair:function(){this.deleteRepairModal=!1},_doDeleteRepair:function(){var t=this;s.request({url:r.url.deleteOwnerRepair,header:s.getHeaders(),method:"POST",data:this.curRepair,success:function(e){console.log(e),0==e.data.code?(uni.showToast({icon:"none",title:"处理成功",duration:2e3}),t._cancleDeleteRepair(),t._loadRepair(0)):uni.showToast({icon:"none",title:e.data.msg,duration:2e3})},fail:function(t){console.log(t),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})},_backRepair:function(t){var e=s.getCurrentCommunity(),i=this,a={page:1,row:1,communityId:e.communityId,repairId:t.repairId,staffId:this.userId,state:"10001"};uni.request({url:r.url.listRepairStaffs,header:s.getHeaders(),method:"GET",data:a,success:function(e){var a=e.data;if(0==a.code){var n=a.data;if(n.length<1)return void uni.showToast({title:"当前不能退单"});i.preStaffId=n[0].preStaffId,i.preStaffName=n[0].preStaffName,i.curRepair=t,i.backRepairModal=!0}},fail:function(t){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})},_cancleBackRepair:function(){this.backRepairModal=!1},_doBackRepair:function(){var t=this;if(""!=this.context){var e=s.getCurrentCommunity(),i={staffId:this.preStaffId,staffName:this.preStaffName,context:this.context,action:"BACK",repairId:this.curRepair.repairId,communityId:e.communityId};s.request({url:r.url.repairDispatch,header:s.getHeaders(),method:"POST",data:i,success:function(e){console.log(e),0==e.data.code?(uni.showToast({icon:"none",title:"处理成功",duration:2e3}),t._cancleBackRepair(),t._loadRepair(0)):uni.showToast({icon:"none",title:e.data.msg,duration:2e3})},fail:function(t){console.log(t),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})}else uni.showToast({title:"退单内容不能为空",icon:"none"})},_appraiseRepair:function(t){s.navigateTo({url:"/pages/appraiseRepair/appraiseRepair?repairId="+t.repairId})},_toPay:function(t){s.navigateTo({url:"/pages/repairPay/repairPay?repairId="+t.repairId+"&communityId="+t.communityId+"&userId="+this.userId})}}};e.default=c},ca01:function(t,e,i){"use strict";i.r(e);var a=i("b026"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},d130:function(t,e,i){var a=i("6b0f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("515d2bcc",a,!0,{sourceMap:!1,shadowMode:!1})},e4bf:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".no-data-icon[data-v-0f4021c1]{font-size:%?200?%}.margin-top-100[data-v-0f4021c1]{margin-top:%?200?%}",""]),t.exports=e}}]);