(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-registerByWechat-registerByWechat"],{"0c7d":function(e,a,t){"use strict";t.r(a);var i=t("73ff"),n=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(a,e,(function(){return i[e]}))}(o);a["default"]=n.a},"3e56":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,".block__title[data-v-12f0d17f]{margin:0;font-weight:400;font-size:14px;color:rgba(69,90,100,.6);padding:%?40?% %?30?% %?20?%}.button_up_blank[data-v-12f0d17f]{height:%?40?%;text-align:center}",""]),e.exports=a},"3ea3":function(e,a,t){var i=t("3e56");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("4f06").default;n("62d040d4",i,!0,{sourceMap:!1,shadowMode:!1})},"73ff":function(e,a,t){"use strict";var i=t("ee27");t("4160"),t("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(t("2ab0")),o=t("a293"),s=o.constant,r={components:{pickerAddress:n.default},data:function(){return{title:"Hello",areaCode:"",areaName:"请选择地区",communityName:"",communityId:"",appUserName:"",idCard:"",link:"",second:60,msgCode:"",areaShow:!1,btnValue:"验证码",btnDisabled:!1,password:"",rePassword:"",areaList:{province_list:{},city_list:{},county_list:{}},sessionKey:"",openId:""}},onLoad:function(e){var a=this,t=o.getLocation(),i=o.getCurrentLocation(),n=i.city+i.district,s=i.adcode;o._loadArea("","",(function(e){a.areaList=e,a.communityName=t,a.areaCode=s,a.areaName=n})),uni.login({success:function(e){console.log("login",e),a.wxLogin(e.code)}})},onShow:function(){if(""==this.areaCode||void 0==this.areaCode){var e=o.getCurrentLocation(),a=e.city+e.district,t=e.adcode;this.areaCode=t,this.areaName=a}else{var i=uni.getStorageSync("_selectCommunity");null!=i&&void 0!=i&&(this.communityId=i.communityId,this.communityName=i.name)}},methods:{onGetPhoneNumber:function(e){if("getPhoneNumber:fail user deny"!=e.detail.errMsg){var a=this;wx.request({url:s.url.getWxPhoto,method:"post",header:o.getHeaders(),data:{iv:e.detail.iv,key:a.sessionKey,decryptData:e.detail.encryptedData},success:function(e){var t=e.data;console.log("日志",t),0==t.code&&(a.link=t.data.phoneNumber)},fail:function(e){}})}else wx.showToast({title:"手机号码未授权，请授权后再使用",icon:"none"})},_doRegister:function(e){var a={areaCode:this.areaCode,communityId:this.communityId,communityName:this.communityName,appUserName:this.appUserName,idCard:this.idCard,link:this.link,msgCode:this.msgCode,password:this.password,openId:this.openId,sessionKey:this.sessionKey},t="";""==this.password||this.password!=this.rePassword?t="密码和重置密码不一致":""==a.areaCode?t="请选择地区":""==a.communityName?t="请填写小区名称":""==a.appUserName?t="请填写业主名称":""==a.link&&(t="请填写手机号"),""!=t?wx.showToast({title:t,icon:"none",duration:2e3}):(uni.showLoading({title:"加载中",mask:!0}),uni.request({url:s.url.ownerRegisterWxPhoto,header:o.getHeaders(),method:"POST",data:a,success:function(e){console.log(e);var a=e.data;if(wx.hideLoading(),0==a.code)return wx.hideLoading(),void wx.redirectTo({url:"/pages/login/login"});wx.showToast({title:a.msg,icon:"none",duration:2e3})},fail:function(e){wx.hideLoading(),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}}))},change:function(e){var a=this;a.areaName="",e.data.forEach((function(e){a.areaName+=e.name})),a.areaCode=e.data[2].code,console.log(e)},chooseCommunity:function(e){""!=this.areaCode&&void 0!=this.areaCode?wx.navigateTo({url:"/pages/viewCommunitys/viewCommunitys?areaCode="+this.areaCode}):wx.showToast({title:"请先选择地区",icon:"none"})},wxLogin:function(e){var a=this,t="";wx.request({url:s.url.loginUrl,method:"post",header:o.getHeaders(),data:{code:e,signature:"",encryptedData:"",iv:"",appId:t,userInfo:{}},success:function(e){var t=e.data.sessionKey;a.sessionKey=t,a.openId=e.data.openId},fail:function(e){var t=res.data.sessionKey;a.sessionKey=t,a.openId=res.data.openId}})}}};a.default=r},ce6e:function(e,a,t){"use strict";var i=t("3ea3"),n=t.n(i);n.a},cef2:function(e,a,t){"use strict";var i={pickerAddress:t("2ab0").default},n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",[t("v-uni-view",{staticClass:"block__title"},[e._v("选择小区")]),t("v-uni-view",{staticClass:"cu-form-group arrow"},[t("v-uni-view",{staticClass:"title"},[e._v("市/区")]),t("pickerAddress",{on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.change.apply(void 0,arguments)}}},[e._v(e._s(e.areaName))]),t("v-uni-text",{staticClass:"cuIcon-right"})],1),t("v-uni-view",{staticClass:"cu-form-group",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseCommunity.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"title"},[e._v("小区名称")]),t("v-uni-input",{attrs:{required:!0,readonly:!0,label:"小区名称",placeholder:"请选择小区",name:"communityName",icon:"arrow"},model:{value:e.communityName,callback:function(a){e.communityName=a},expression:"communityName"}}),t("v-uni-text",{staticClass:"cuIcon-right"})],1),t("v-uni-view",{staticClass:"block__title"},[e._v("业主信息")]),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("姓名")]),t("v-uni-input",{attrs:{required:!0,label:"姓名",clearable:!0,placeholder:"请输入名称",name:"appUserName"},model:{value:e.appUserName,callback:function(a){e.appUserName=a},expression:"appUserName"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("身份证")]),t("v-uni-input",{attrs:{required:!0,label:"身份证",clearable:!0,placeholder:"请输入身份证",name:"idCard"},model:{value:e.idCard,callback:function(a){e.idCard=a},expression:"idCard"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("密码")]),t("v-uni-input",{attrs:{required:!0,type:"password",label:"密码",clearable:!0,placeholder:"请输入密码"},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("确认密码")]),t("v-uni-input",{attrs:{required:!0,type:"password",label:"确认密码",clearable:!0,placeholder:"请输入确认密码"},model:{value:e.rePassword,callback:function(a){e.rePassword=a},expression:"rePassword"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("手机号")]),t("v-uni-input",{attrs:{required:!0,label:"手机号",disabled:"disabled",clearable:!0,placeholder:"请输入手机号"},model:{value:e.link,callback:function(a){e.link=a},expression:"link"}}),t("v-uni-button",{staticClass:"cu-btn bg-green",attrs:{"open-type":"getPhoneNumber"},on:{getphonenumber:function(a){arguments[0]=a=e.$handleEvent(a),e.onGetPhoneNumber.apply(void 0,arguments)}}},[e._v("获取手机号")])],1),t("v-uni-view",{staticClass:"padding flex flex-direction margin-top"},[t("v-uni-button",{staticClass:"cu-btn bg-green   lg",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e._doRegister()}}},[e._v("绑定")])],1)],1)},o=[];t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return o})),t.d(a,"a",(function(){return i}))},d176:function(e,a,t){"use strict";t.r(a);var i=t("cef2"),n=t("0c7d");for(var o in n)"default"!==o&&function(e){t.d(a,e,(function(){return n[e]}))}(o);t("ce6e");var s,r=t("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"12f0d17f",null,!1,i["a"],s);a["default"]=c.exports}}]);