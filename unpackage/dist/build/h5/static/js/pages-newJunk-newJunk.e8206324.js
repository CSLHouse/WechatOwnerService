(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-newJunk-newJunk"],{"14a6":function(i,e,t){"use strict";t.r(e);var s=t("e14a"),n=t("75df");for(var a in n)"default"!==a&&function(i){t.d(e,i,(function(){return n[i]}))}(a);var c,o=t("f0c5"),u=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,"230cb10c",null,!1,s["a"],c);e["default"]=u.exports},1938:function(i,e,t){"use strict";t("4160"),t("a434"),t("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=t("a293"),n=s.constant,a=s.factory,c={data:function(){return{imgList:[],photos:[],typeCds:["旧货","需求"],index:0,typeCdIds:["222222","333333"],typeCdName:"请选择",typeCd:"",classificationName:"请选择",classificationIndex:0,classificationId:"",classifications:["家具","电器"],classificationIds:["10008","10002"],classification:"",referencePrice:"",publishUserId:"",publishUserName:"",publishUserLink:"",context:"",communityId:""}},onLoad:function(i){var e=this;s.onLoad(i),s.getOwner((function(i){console.log("_ownerInfo",i),e.publishUserId=i.userId,e.communityId=i.communityId,e.publishUserLink=i.link,e.publishUserName=i.appUserName}))},methods:{changeTypeCd:function(i){var e=i.detail.value;this.typeCdName=this.typeCds[e],this.typeCd=this.typeCdIds[e]},_changeClassifications:function(i){var e=i.detail.value;this.classificationName=this.classifications[e],this.classification=this.classificationIds[e]},submitJunk:function(){var i={typeCd:this.typeCd,classification:this.classification,context:this.context,referencePrice:this.referencePrice,publishUserName:this.publishUserName,publishUserLink:this.publishUserLink,photos:[],publishUserId:this.publishUserId,communityId:this.communityId},e=this.photos;e.forEach((function(e){i.photos.push({photo:e})}));var t="";""==i.typeCd?t="类型为空":""==i.classification?t="分类为空":""==i.context?t="发布内容为空":""==i.referencePrice?t="参考价格为空":""==i.publishUserName?t="发布人为空":""==i.publishUserLink?t="联系方式为空":""==i.publishUserId?t="发布信息为空":""==i.communityId&&(t="小区信息为空"),""!=t?wx.showToast({title:t,icon:"none",duration:2e3}):(console.log("提交数据",i),s.request({url:n.url.saveJunkRequirement,header:s.getHeaders(),method:"POST",data:i,success:function(i){console.log(i),200==i.statusCode?(uni.showToast({icon:"none",title:"处理成功",duration:2e3}),uni.navigateBack({delta:1})):uni.showToast({icon:"none",title:i.data,duration:2e3})},fail:function(i){console.log(i),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}}))},removePhoto:function(i){console.log(i.detail.index);var e=[];this.imgList.forEach((function(t,s){s!=i.detail.index&&e.push(t)}));var t=[];this.photos.forEach((function(e,s){s!=i.detail.index&&t.push(e)})),this.photos=t,this.imgList=e},deleteImage:function(i){console.log(i);var e=this.$data.imgList;e.splice(i,1)},ChooseImage:function(i){var e=this;wx.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(i){console.log(i),e.$data.imgList.push(i.tempFilePaths[0]);var t="";a.base64.urlTobase64(i.tempFilePaths[0]).then((function(i){t=i,console.log("base64",t),e.photos.push(t)}))}})}}};e.default=c},"75df":function(i,e,t){"use strict";t.r(e);var s=t("1938"),n=t.n(s);for(var a in s)"default"!==a&&function(i){t.d(e,i,(function(){return s[i]}))}(a);e["default"]=n.a},e14a:function(i,e,t){"use strict";var s,n=function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("v-uni-view",[t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[i._v("类型")]),t("v-uni-picker",{attrs:{range:i.typeCds,value:i.index},on:{change:function(e){arguments[0]=e=i.$handleEvent(e),i.changeTypeCd.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"picker"},[i._v(i._s(i.typeCdName))])],1)],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[i._v("分类")]),t("v-uni-picker",{attrs:{value:i.classificationIndex,range:i.classifications},on:{change:function(e){arguments[0]=e=i.$handleEvent(e),i._changeClassifications.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"picker"},[i._v(i._s(i.classificationName))])],1)],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[i._v("参考价格")]),t("v-uni-input",{attrs:{type:"number",placeholder:"请输入参考价格"},model:{value:i.referencePrice,callback:function(e){i.referencePrice=e},expression:"referencePrice"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[i._v("联系人")]),t("v-uni-input",{attrs:{placeholder:"请输入联系人,如:吴先生"},model:{value:i.publishUserName,callback:function(e){i.publishUserName=e},expression:"publishUserName"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[i._v("联系电话")]),t("v-uni-input",{attrs:{type:"number",placeholder:"请输入联系电话"},model:{value:i.publishUserLink,callback:function(e){i.publishUserLink=e},expression:"publishUserLink"}})],1),t("v-uni-view",{staticClass:"cu-form-group margin-top"},[t("v-uni-textarea",{attrs:{placeholder:"请输入内容"},model:{value:i.context,callback:function(e){i.context=e},expression:"context"}})],1),222222==i.typeCd?t("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[t("v-uni-view",{staticClass:"action"},[i._v("图片上传")]),t("v-uni-view",{staticClass:"action"},[i._v(i._s(i.imgList.length)+"/6")])],1):i._e(),222222==i.typeCd?t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"grid col-3 grid-square flex-sub"},[i._l(i.imgList,(function(e,s){return t("v-uni-view",{key:s,staticClass:"bg-img",attrs:{"data-url":i.imgList[s]}},[t("v-uni-image",{attrs:{src:i.imgList[s],mode:"aspectFill"}}),t("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":s},on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.deleteImage(s)}}},[t("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),i.imgList.length<6?t("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.ChooseImage.apply(void 0,arguments)}}},[t("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):i._e()],2)],1):i._e(),t("v-uni-view",{staticClass:"flex flex-direction margin"},[t("v-uni-button",{staticClass:"cu-btn bg-green margin-tb-sm lg",on:{click:function(e){arguments[0]=e=i.$handleEvent(e),i.submitJunk()}}},[i._v("发布")])],1)],1)},a=[];t.d(e,"b",(function(){return n})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return s}))}}]);