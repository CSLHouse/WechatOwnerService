(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-changeOwnerPhone-changeOwnerPhone"],{"0e34":function(e,n,t){"use strict";t.r(n);var o=t("ed44"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"779d":function(e,n,t){"use strict";t.r(n);var o=t("8c87"),a=t("0e34");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);var s,u=t("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"2bed54bc",null,!1,o["a"],s);n["default"]=r.exports},"8c87":function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",[t("v-uni-form",[t("v-uni-view",{staticClass:"cu-form-group margin-top"},[t("v-uni-view",{staticClass:"title"},[e._v("手机号")]),t("v-uni-input",{attrs:{placeholder:"请输入手机号",type:"number",disabled:"disabled",name:"input"},model:{value:e.phone,callback:function(n){e.phone=n},expression:"phone"}}),t("v-uni-button",{staticClass:"cu-btn bg-green",attrs:{"open-type":"getPhoneNumber"},on:{getphonenumber:function(n){arguments[0]=n=e.$handleEvent(n),e.onGetPhoneNumber.apply(void 0,arguments)}}},[e._v("获取手机号")])],1)],1),t("v-uni-view",{staticClass:"padding flex flex-direction"},[t("v-uni-button",{staticClass:"cu-btn bg-green lg",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e._doChangePhoto()}}},[e._v("提交")])],1)],1)},i=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}))},ed44:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("a293"),a=o.constant,i=(o.factory,{data:function(){return{phone:""}},onLoad:function(){var e=this;uni.login({success:function(n){console.log("login",n),e.wxLogin(n.code)}})},methods:{wxLogin:function(e){var n=this,t="";wx.request({url:a.url.loginUrl,method:"post",header:o.getHeaders(),data:{code:e,signature:"",encryptedData:"",iv:"",appId:t,userInfo:{}},success:function(e){var t=e.data.sessionKey;n.sessionKey=t,n.openId=e.data.openId},fail:function(e){var t=res.data.sessionKey;n.sessionKey=t,n.openId=res.data.openId}})},onGetPhoneNumber:function(e){if("getPhoneNumber:fail user deny"!=e.detail.errMsg){var n=this;wx.request({url:a.url.getWxPhoto,method:"post",header:o.getHeaders(),data:{iv:e.detail.iv,key:n.sessionKey,decryptData:e.detail.encryptedData},success:function(e){var t=e.data;console.log("日志",t),0==t.code&&(n.phone=t.data.phoneNumber)},fail:function(e){}})}else wx.showToast({title:"手机号码未授权，请授权后再使用",icon:"none"})},_doChangePhoto:function(){if(""!=this.phone){var e=uni.getStorageSync(a.mapping.OWNER_INFO),n={memberId:e.memberId,link:this.phone,communityId:e.communityId,userId:e.userId};o.request({url:a.url.changeOwnerPhone,header:o.getHeaders(),method:"POST",data:n,success:function(e){var n=e.data;0==n.code?uni.navigateBack({delta:1}):uni.showToast({icon:"none",title:n.msg})},fail:function(e){uni.showToast({title:"调用接口失败"}),console.log(e)}})}else uni.showToast({icon:"none",title:"手机号不能为空"})}}});n.default=i}}]);