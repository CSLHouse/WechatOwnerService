(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/complaint/complaint"],{"205a":function(o,t,e){},"3f07":function(o,t,e){"use strict";var n=e("205a"),i=e.n(n);i.a},5748:function(o,t,e){"use strict";var n,i=function(){var o=this,t=o.$createElement;o._self._c},a=[];e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return n}))},"6be3":function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e("3035"),i=n.constant,a=n.factory,s={data:function(){return{imgList:[],imageIndex:0,index:null,complaintIndex:0,roomCloums:[],roomIdArr:[],roomName:"请选择",roomId:"",roomShow:!1,columns:["投诉","建议"],typeCds:["809001","809002"],typeName:"请选择",typeCd:"",typeShow:!1,photoList:[],tel:"",context:"",complaintName:"",userId:"",storeId:"",photos:[],communityId:""}},onLoad:function(o){var t=this;n.onLoad(o),n.getRooms().then((function(o){console.log(o);var e=o.data.rooms,n=[],i=[];e.map((function(o){n.push(o.floorNum+"号楼"+o.unitNum+"单元"+o.roomNum+"室"),i.push(o.roomId)})),console.log(t),t.roomCloums=n,t.roomIdArr=i,t.userId=o.data.owner.appUserId,t.communityId=o.data.owner.communityId}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{ChooseImage:function(o){var t=this;wx.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(o){console.log(o),t.$data.imgList.push(o.tempFilePaths[0]);var e="";a.base64.urlTobase64(o.tempFilePaths[0]).then((function(o){e=o,console.log("base64",e),t.photos.push(e)}))}})},deleteImage:function(o){console.log(o);var t=this.$data.imgList;t.splice(o,1)},_changeComplaint:function(o){this.typeName=this.columns[o.detail.value],this.typeCd=this.typeCds[o.detail.value]},_changeRoom:function(o){this.roomName=this.roomCloums[o.detail.value],this.roomId=this.roomIdArr[o.detail.value]},bindInput:function(o){switch(console.log("数据监听",o),o.target.id){case"complaintName":this.$data.complaintName=o.detail.value;break;case"tel":this.$data.tel=o.detail.value;break;case"context":this.$data.context=o.detail.value;break}console.log(this)},bindOwner:function(o){var t={typeCd:this.typeCd,complaintName:this.complaintName,tel:this.tel,roomId:this.roomId,photos:[],context:this.context,userId:this.userId,communityId:this.communityId},e=this.photos;e.forEach((function(o){t.photos.push({photo:o})}));var a="";""==t.typeCd?a="请选择投诉类型":""==t.complaintName?a="请填写投诉人":""==t.tel?a="请填写手机号":""==t.context&&(a="请填写投诉内容"),""!=a?wx.showToast({title:a,icon:"none",duration:2e3}):(console.log("提交数据",t),n.request({url:i.url.saveComplaint,header:n.getHeaders(),method:"POST",data:t,success:function(o){var t=o.data;0!=t.code?wx.showToast({title:"服务器异常了",icon:"none",duration:2e3}):wx.redirectTo({url:"/pages/complaintList/complaintList"})},fail:function(o){console.log(o),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}}))},onChange:function(o){console.log(o)},onTypeConfirm:function(o){console.log("onConfirm",o),this.typeName=o.detail.value,this.typeCd=o.detail.index?"809001":"809002",this.typeShow=!1},onTypeCancel:function(o){this.typeShow=!1},chooseType:function(o){this.typeShow=!0},onRoomConfirm:function(o){console.log("onConfirm",o),this.roomName=o.detail.value,this.roomId=this.roomIdArr[o.detail.index],this.roomShow=!1},onRoomCancel:function(o){this.roomShow=!1},chooseRoom:function(o){this.roomShow=!0},afterRead:function(o){var t=o.detail.file,e=this,n=this.photoList,i=void 0===n?[]:n;i.push(t),this.photoList=i,a.base64.urlTobase64(t.path).then((function(o){e.photos.push(o)})),console.log("data信息：",this)},removePhoto:function(o){console.log(o.detail.index);var t=[];this.photoList.forEach((function(e,n){n!=o.detail.index&&t.push(e)}));var e=[];this.photos.forEach((function(t,n){n!=o.detail.index&&e.push(t)})),this.photos=e,this.photoList=t}}};t.default=s},"7b10":function(o,t,e){"use strict";e.r(t);var n=e("6be3"),i=e.n(n);for(var a in n)"default"!==a&&function(o){e.d(t,o,(function(){return n[o]}))}(a);t["default"]=i.a},eaab:function(o,t,e){"use strict";e.r(t);var n=e("5748"),i=e("7b10");for(var a in i)"default"!==a&&function(o){e.d(t,o,(function(){return i[o]}))}(a);e("3f07");var s,c=e("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},f096:function(o,t,e){"use strict";(function(o){e("42b7");n(e("66fd"));var t=n(e("eaab"));function n(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("543d")["createPage"])}},[["f096","common/runtime","common/vendor"]]]);