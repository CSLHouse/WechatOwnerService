(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{1956:function(t,e,n){"use strict";var o,r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},"239e":function(t,e,n){},"30be":function(t,e,n){"use strict";var o=n("b990"),r=n.n(o);r.a},"34d3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n("9331")),o(n("6f39"));function o(t){return t&&t.__esModule?t:{default:t}}var r=n("3035"),i=r.constant,a=(r.factory,{data:function(){return{logoUrl:"",username:"test001",password:"wuxw2015",appId:"",code:""}},onLoad:function(e){this,this.logoUrl=i.url.baseUrl+"logo.png";var n=t.getAccountInfoSync();this.appId=n.miniProgram.appId},methods:{_doLogin:function(){var t=this;wx.login({success:function(e){e.code?t._doMyLogin(e):t.coreUtil.showInfo("微信登录失败")},fail:function(e){t.coreUtil.showInfo("微信登录失败"),console.log(e)}})},_doMyLogin:function(e){if(""!=this.username)if(""!=this.password){var n=e.hasOwnProperty("code")?e.code:"",o={username:this.username,password:this.password,code:n,appId:this.appId};t.showLoading({title:"加载中",mask:!0}),t.request({url:i.url.loginOwnerUrl,header:r.getHeaders(),method:"POST",data:JSON.stringify(o),success:function(e){if(t.hideLoading(),console.log("登录返回信息",e),200==e.statusCode){var n=e.data,o=n.owner;wx.setStorageSync(i.mapping.OWNER_INFO,o),wx.setStorageSync(i.mapping.USER_INFO,JSON.stringify(o));var r={communityId:o.communityId,communityName:o.communityName};wx.setStorageSync(i.mapping.CURRENT_COMMUNITY_INFO,r);var a=new Date,u=a.getFullYear(),s=a.getMonth(),c=a.getDate(),d=a.getHours()+1,f=a.getMinutes(),l=a.getSeconds();console.log("获取过去时间",u,s,c,d,f,l);var g=new Date(u,s,c,d,f,l);console.log("afterOneHourDate",g),wx.setStorageSync(i.mapping.LOGIN_FLAG,{sessionKey:o.userId,expireTime:g.getTime()}),wx.setStorageSync(i.mapping.TOKEN,n.token),wx.setStorageSync(i.mapping.OWNER_KEY,n.key),wx.switchTab({url:"/pages/index/index"})}else t.showToast({icon:"none",title:e.data})},fail:function(e){console.log(e),t.hideLoading(),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})}else wx.showToast({title:"请填写密码",icon:"none"});else wx.showToast({title:"请填写用户名",icon:"none"})},_doRegister:function(){var e="/pages/register/register";t.navigateTo({url:e})}}});e.default=a}).call(this,n("543d")["default"])},"4bd8":function(t,e,n){"use strict";n.r(e);var o=n("34d3"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},"52ea":function(t,e,n){"use strict";n.r(e);var o=n("1956"),r=n("4bd8");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("30be");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},"54c2":function(t,e,n){"use strict";var o=n("91e8"),r=n.n(o);r.a},"614d":function(t,e,n){"use strict";(function(t){n("42b7");o(n("66fd"));var e=o(n("52ea"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"65ed":function(t,e,n){"use strict";var o,r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},"6a67":function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={data:function(){return{showPassword:!1,second:0,isRunCode:!1}},props:{type:String,value:String,placeholder:String,maxlength:{type:[Number,String],default:20},isShowPass:{type:[Boolean,String],default:!1},isShowCode:{type:[Boolean,String],default:!1},codeText:{type:String,default:"获取验证码"},setTime:{type:[Number,String],default:60}},model:{prop:"value",event:"input"},mounted:function(){var t=this;this,this.$on("runCode",(function(e){t.runCode(e)})),clearInterval(o)},methods:{showPass:function(){this.showPassword=!this.showPassword},onInput:function(t){this.$emit("input",t.target.value)},setCode:function(){if(this.isRunCode)return!1;this.$emit("setCode")},runCode:function(t){if("0"==String(t))return this.second=0,clearInterval(o),this.isRunCode=!1,!1;if(this.isRunCode)return!1;this.isRunCode=!0,this.second=this._setTime;var e=this;o=setInterval((function(){e.second--,0==e.second&&(e.isRunCode=!1,clearInterval(o))}),1e3)}},computed:{_type:function(){var t=this.type;return"password"==t?"text":t},_isShowPass:function(){return"false"!==String(this.isShowPass)},_isShowCode:function(){return"false"!==String(this.isShowCode)},_setTime:function(){var t=Number(this.setTime);return t>0?t:60},getVerCodeSecond:function(){return this.second<=0?this.codeText:this.second<10?"0"+this.second:this.second}}};e.default=r},"6f39":function(t,e,n){"use strict";n.r(e);var o=n("65ed"),r=n("cd48");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("54c2");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},"91e8":function(t,e,n){},9331:function(t,e,n){"use strict";n.r(e);var o=n("cdbc"),r=n("adb2");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("fd7a");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},adb2:function(t,e,n){"use strict";n.r(e);var o=n("6a67"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},b990:function(t,e,n){},cd48:function(t,e,n){"use strict";n.r(e);var o=n("cfca"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},cdbc:function(t,e,n){"use strict";var o,r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},cfca:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{text:String,rotate:{type:[Boolean,String],default:!1},bgColor:{type:String,default:"linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.6))"},fontColor:{type:String,default:"#FFFFFF"}},computed:{_rotate:function(){return"false"!==String(this.rotate)}}};e.default=o},fd7a:function(t,e,n){"use strict";var o=n("239e"),r=n.n(o);r.a}},[["614d","common/runtime","common/vendor"]]]);