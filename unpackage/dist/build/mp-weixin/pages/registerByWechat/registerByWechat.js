(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/registerByWechat/registerByWechat"],{"0490":function(e,t,o){"use strict";o.r(t);var n=o("a9b4"),a=o("6996");for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);o("e355");var s,r=o("f0c5"),d=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=d.exports},6996:function(e,t,o){"use strict";o.r(t);var n=o("e2e6"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},a8f0:function(e,t,o){"use strict";(function(e){o("42b7");n(o("66fd"));var t=n(o("0490"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},a9b4:function(e,t,o){"use strict";var n={pickerAddress:function(){return Promise.all([o.e("common/vendor"),o.e("components/pickerAddress/pickerAddress")]).then(o.bind(null,"3fd1"))}},a=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}))},e2e6:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("3035"),a=n.constant,i=function(){Promise.all([o.e("common/vendor"),o.e("components/pickerAddress/pickerAddress")]).then(function(){return resolve(o("3fd1"))}.bind(null,o)).catch(o.oe)},s={components:{pickerAddress:i},data:function(){return{title:"Hello",areaCode:"",areaName:"请选择地区",communityName:"",communityId:"",appUserName:"",idCard:"",link:"",second:60,msgCode:"",areaShow:!1,btnValue:"验证码",btnDisabled:!1,password:"",rePassword:"",areaList:{province_list:{},city_list:{},county_list:{}},sessionKey:"",openId:""}},onLoad:function(t){var o=this,a=n.getLocation(),i=n.getCurrentLocation(),s=i.city+i.district,r=i.adcode;n._loadArea("","",(function(e){o.areaList=e,o.communityName=a,o.areaCode=r,o.areaName=s})),e.login({success:function(e){console.log("login",e),o.wxLogin(e.code)}})},onShow:function(){if(""==this.areaCode||void 0==this.areaCode){var t=n.getCurrentLocation(),o=t.city+t.district,a=t.adcode;this.areaCode=a,this.areaName=o}else{var i=e.getStorageSync("_selectCommunity");null!=i&&void 0!=i&&(this.communityId=i.communityId,this.communityName=i.name)}},methods:{onGetPhoneNumber:function(e){if("getPhoneNumber:fail user deny"!=e.detail.errMsg){var t=this;wx.request({url:a.url.getWxPhoto,method:"post",header:n.getHeaders(),data:{iv:e.detail.iv,key:t.sessionKey,decryptData:e.detail.encryptedData},success:function(e){var o=e.data;console.log("日志",o),0==o.code&&(t.link=o.data.phoneNumber)},fail:function(e){}})}else wx.showToast({title:"手机号码未授权，请授权后再使用",icon:"none"})},_doRegister:function(t){var o={areaCode:this.areaCode,communityId:this.communityId,communityName:this.communityName,appUserName:this.appUserName,idCard:this.idCard,link:this.link,msgCode:this.msgCode,password:this.password,openId:this.openId,sessionKey:this.sessionKey},i="";""==this.password||this.password!=this.rePassword?i="密码和重置密码不一致":""==o.areaCode?i="请选择地区":""==o.communityName?i="请填写小区名称":""==o.appUserName?i="请填写业主名称":""==o.link&&(i="请填写手机号"),""!=i?wx.showToast({title:i,icon:"none",duration:2e3}):(e.showLoading({title:"加载中",mask:!0}),e.request({url:a.url.ownerRegisterWxPhoto,header:n.getHeaders(),method:"POST",data:o,success:function(e){console.log(e);var t=e.data;if(wx.hideLoading(),0==t.code)return wx.hideLoading(),void wx.redirectTo({url:"/pages/login/login"});wx.showToast({title:t.msg,icon:"none",duration:2e3})},fail:function(e){wx.hideLoading(),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}}))},change:function(e){var t=this;t.areaName="",e.data.forEach((function(e){t.areaName+=e.name})),t.areaCode=e.data[2].code,console.log(e)},chooseCommunity:function(e){""!=this.areaCode&&void 0!=this.areaCode?wx.navigateTo({url:"/pages/viewCommunitys/viewCommunitys?areaCode="+this.areaCode}):wx.showToast({title:"请先选择地区",icon:"none"})},wxLogin:function(t){var o=this,i="",s=e.getAccountInfoSync();i=s.miniProgram.appId,wx.request({url:a.url.loginUrl,method:"post",header:n.getHeaders(),data:{code:t,signature:"",encryptedData:"",iv:"",appId:i,userInfo:{}},success:function(e){var t=e.data.sessionKey;o.sessionKey=t,o.openId=e.data.openId},fail:function(e){var t=res.data.sessionKey;o.sessionKey=t,o.openId=res.data.openId}})}}};t.default=s}).call(this,o("543d")["default"])},e355:function(e,t,o){"use strict";var n=o("f145"),a=o.n(n);a.a},f145:function(e,t,o){}},[["a8f0","common/runtime","common/vendor"]]]);